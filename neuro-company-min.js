(function(a){var b={},c=function(d){var e=b[d];if(!e){e=b[d]={};var f=e.exports={};a[d].call(f,c,e,f,window)}return e.exports};window.Neuro=c("0")})({0:function(a,b,c,d){var e=a("1");e.Observer=a("o").Observer,e.Model=a("q").Model,e.Collection=a("s").Collection,e.View=a("t").View,c=b.exports=e},1:function(a,b,c,d){var e=a("2");e.Model=a("3").Model,e.Collection=a("c").Collection,e.View=a("e").View,e.Router=a("g").Router,e.Route=a("h").Route,e.Is=a("5").Is,e.Mixins={Butler:a("a").Butler,Connector:a("7").Connector,Silence:a("6").Silence,Snitch:a("n").Snitch},c=b.exports=e},2:function(a,b,c,d){c=b.exports={version:"0.2.7"}},3:function(a,b,c,d){var e=a("4").Model,f=a("a").Butler,g=a("b").Snitch,h=a("9"),i=function(a){return function(b){var c=this.getAccessor(b,a),d=this._accessorName;return c&&d!=b?c():this.parent(b)}.overloadGetter()};e.implement(new f),e.implement(new g),e.implement(h(["error"],{signalErrorProperty:function(a,b){!this.isSilent()&&this.fireEvent("error:"+a,[this,a,b])}})),c.Model=new Class({Extends:e,_errored:!1,_erroredProperties:{},setup:function(a,b){return this.setupAccessors(),this.setupValidators(),this.parent(a,b),this},__set:function(a,b){var c=this.getAccessor(a,"set");return c&&this._accessorName!=a?c.apply(this,arguments):this.validate(a,b)?this.parent(a,b):(this._errored=!0,this._erroredProperties[a]=b,this)}.overloadSetter(),set:function(a,b){return this.parent(a,b),!this.isSetting()&&this._errored&&(this._onErrorProperty(this._erroredProperties),this.signalError(),this._resetErrored()),this},get:i("get"),getPrevious:i("getPrevious"),_resetErrored:function(){return this._errored&&(this._errored=!1,this._erroredProperties={}),this},_onErrorProperty:function(a,b){return this.signalErrorProperty(a,b),this}.overloadSetter(),setAccessor:function(a,b){return a&&b&&(b.get&&!b.getPrevious&&(b.getPrevious=b.get),this.parent(a,b)),this}.overloadSetter(),validate:function(a,b){return(this.getValidator("*")||this.parent).call(this,a,b)},proof:function(){return this.parent(this.getData())}})},4:function(a,b,c,d){var e=a("5").Is,f=a("6").Silence,g=a("7").Connector,h=a("9"),i=function(a){switch(typeOf(a)){case"array":a=a.slice();break;case"object":if(!a.$constructor||a.$constructor&&!instanceOf(a.$constructor,Class))a=Object.clone(a)}return a},j=function(a){return function(b){return this[a][b]}.overloadGetter()},k=function(a){return function(){var b=this.keys(),c={};return b.each(function(b){c[b]=i(this[a](b))}.bind(this)),c}},l=new Class({Implements:[g,Events,Options,f],primaryKey:undefined,_data:{},_changed:!1,_changedProperties:{},_previousData:{},_setting:0,options:{primaryKey:undefined,defaults:{}},initialize:function(a,b){if(instanceOf(a,this.constructor))return a;this.setOptions(b),this.setup(a,b)},setup:function(a,b){return this.primaryKey=this.options.primaryKey,this.silence(function(){this.set(this.options.defaults)}.bind(this)),a&&this.set(a),this},__set:function(a,b){var c=this.get(a);return e.Equal(c,b)||(this._changed=!0,this._data[a]=this._changedProperties[a]=i(b)),this}.overloadSetter(),_set:function(a,b){return this._setting++,this.__set(a,b),this._setting--,this},set:function(a,b){var c;return a&&(c=this.isSetting(),!c&&this._setPrevious(this.getData()),a=instanceOf(a,l)?a.getData():a,this._set(a,b),!c&&this._changed&&(this._onChangeProperty(this._changedProperties),this.signalChange(),this._resetChanged())),this},isSetting:function(){return!!this._setting},unset:function(a){var b={},c,d=0,e;a=Array.from(a),c=a.length;while(c--)b[a[d++]]=void 0;return this.set(b),this},reset:function(a){var b={},c=this.options.defaults,d,e=0,f;if(a){a=Array.from(a),d=a.length;while(d--)f=a[e++],b[f]=c[f]}else b=c;return this.set(b),this.signalReset(),this},get:j("_data"),getData:k("get"),_setPrevious:function(a,b){return this._previousData[a]=b,this}.overloadSetter(),getPrevious:j("_previousData"),getPreviousData:k("getPrevious"),_resetChanged:function(){return this._changed&&(this._changed=!1,this._changedProperties={}),this},_onChangeProperty:function(a,b){return this._changed&&this.signalChangeProperty(a,b,this.getPrevious(a)),this}.overloadSetter(),destroy:function(){return this.signalDestroy(),this},toJSON:function(){return this.getData()},spy:function(a,b){return Type.isString(a)&&a in this._data&&Type.isFunction(b)&&this.addEvent("change:"+a,b),this}.overloadSetter(),unspy:function(a,b){return Type.isString(a)&&a in this._data&&this.removeEvents("change:"+a,b),this}.overloadSetter()});l.implement(h(["change","destroy","reset"],{signalChangeProperty:function(a,b,c){return!this.isSilent()&&this.fireEvent("change:"+a,[this,a,b,c]),this}})),["each","subset","map","filter","every","some","keys","values","getLength","keyOf","contains","toQueryString"].each(function(a){l.implement(a,function(){return Object[a].apply(Object,[this._data].append(Array.from(arguments)))})}),c.Model=l},5:function(a,b,c,d){(function(a,b){var c=Object.prototype.toString,d=Object.prototype.hasOwnProperty,e=b.Type,f=a.Is={},g=b.Type=function(a,b){var c=new e(a,b),d;return c?(d="is"+a,f[a]=f.not[a]=g[d]=e[d],c):c}.extend(e);g.prototype=e.prototype;for(var h in e)g.hasOwnProperty(h)&&h.test("is")&&(h=h.replace("is",""),f[h]=g["is"+h]);f.NaN=function(a){return a!==a},f.Null=function(a){return a===null},f.Undefined=function(a){return a===void 0};var i={string:function(a,b){return a==String(b)},number:function(a,b){return a!=+a?b!=+b:a==0?1/a==1/b:a==+b},date:function(a,b){return+a==+b},"boolean":function(a,b){return this.date(a,b)},regexp:function(a,b){return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}},j=function(a,b){return a.hasOwnProperty(b)},k=function(a,b,c,d){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;if(a.isEqual&&f.Function(a.isEqual))return a.isEqual(b);if(b.isEqual&&f.Function(b.isEqual))return b.isEqual(a);var e=typeOf(a),g=typeOf(b);if(e!=g)return!1;if(i[e])return i[e](a,b);if(typeof a!="object"||typeof b!="object")return!1;var h=c.length;while(h--)if(c[h]==a)return d[h]==b;c.push(a),d.push(b);var l=0,m=!0;if(e=="array"){l=a.length,m=l==b.length;if(m)while(l--)if(!(m=k(a[l],b[l],c,d)))break}else{var n=a.constructor,o=b.constructor;if(n!==o&&!(f.Function(n)&&instanceOf(n,n)&&f.Function(o)&&instanceOf(o,o)))return!1;for(var p in a)if(j(a,p)){l++;if(!(m=j(b,p)&&k(a[p],b[p],c,d)))break}if(m){for(p in b)if(j(b,p)&&!(l--))break;m=!l}}return c.pop(),d.pop(),m};f.Equal=function(a,b){return k(a,b,[],[])},function(a){var b={};for(var c in a)j(a,c)&&(b[c]=function(b){return function(c,d){return!a[b].call(a,c,d)}}(c));a.not=b}(f)})(typeof c!="undefined"?c:window,this.window||d)},6:function(a,b,c,d){var e=new Class({_silent:0,silence:function(a){return this._silent++,a&&a.call(this),this._silent--,this},isSilent:function(){return!!this._silent}});c.Silence=e},7:function(a,b,c,d){a("8");var e=function(a,b,c,d){return a=="string"&&(c=d&&d[c]?d.bound(c):undefined),c},f=function(a,b){var c={};return Object.each(a,function(a,d){d=d=="*"?b:b+":"+d,c[d]=a}),c},g=function(a,b,c){Object.each(b,function(b,d){b=Array.from(b),b.each(function(b){var h=typeOf(b);switch(h){case"object":instanceOf(b,Class)||g.call(this,a,f(b,d),c);break;case"string":case"function":b=e.call(this,h,d,b,c),b&&this[a](d,b)}},this)},this)},h=function(a){var b=a=="connect"?"addEvent":"removeEvent";return function(c,d,e){var f=this.options.connector;return Type.isBoolean(d)&&(e=d,d=undefined),d&&(f=f[d]),g.call(this,b,f,c),e&&c&&c[a](this,d,!1),this}},i=new Class({Implements:[Class.Binds],options:{connector:{}},connect:h("connect"),disconnect:h("disconnect")});c.Connector=i},8:function(a,b,c,d){Class.Binds=new Class({$bound:{},bound:function(a){return this.$bound[a]?this.$bound[a]:this.$bound[a]=this[a].bind(this)}})},9:function(a,b,c,d){var e="signal",f="-",g=":";c=b.exports=function(a,b,c){return Type.isFunction(b)||(c=b,b=undefined),c=c||{},Array.from(a).each(function(a){var d=(e+f+a.replace(g,f)).camelCase();c[d]=b?b(a):function(){return Array.prototype.unshift.call(arguments,this),!this.isSilent()&&this.fireEvent(a,arguments),this}}),c}},a:function(a,b,c,d){var e=new Class({_accessors:{},_accessorName:undefined,options:{accessors:{}},setupAccessors:function(){var a=this._accessors;return this._accessors={},this.setAccessor(Object.merge({},a,this.options.accessors)),this},isAccessing:function(){return!!this._accessorName},_processAccess:function(a,b){var c;return a&&(this._accessorName=a,c=b(),this._accessorName=void 0),c},setAccessor:function(a,b){var c={};return!!a&&Type.isObject(b)&&(Object.each(b,function(b,d){var e=b;b._orig||(b=function(){return this._processAccess(a,e.pass(arguments,this))}.bind(this),b._orig=e),c[d]=b},this),this._accessors[a]=c),this}.overloadSetter(),getAccessor:function(a,b){var c=this._accessors[a];return b?c&&c[b]:c},unsetAccessor:function(a,b){return a&&(b?this._accessors[a][b]=void 0:this._accessors[a]=void 0),this}});c.Butler=e},b:function(a,b,c,d){var e="*",f=function(a){var b={};return typeOf(a)=="function"?b[e]=a:b=a,b},g=new Class({_validators:{},options:{validators:{}},setupValidators:function(){var a=this._validators;return this._validators={},this.setValidator(Object.merge({},f(a),f(this.options.validators))),this},setValidator:function(a,b){var c=b;return b&&!b._orig&&(b=b.bind(this),b._orig=c),this._validators[a]=b,this}.overloadSetter(),getValidator:function(a){return this._validators[a]}.overloadGetter(),validate:function(a,b){var c=this.getValidator(a),d=!0;return c&&(d=c(b)),d},proof:function(a){var b=Object.clone(this._validators),c=b[e],d;return c?(delete b[e],d=Object.keys(a),c(a)&&Object.keys(b).every(d.contains.bind(d))):g.proof(a,b)}});g.proof=function(a,b){return Object.every(b,function(b,c){return c in a&&b(a[c])})},c.Snitch=g},c:function(a,b,c,d){var e=a("d").Collection,f=a("3").Model,g=a("b").Snitch,h=function(a,b){return this.parent(b,a)};e.implement(new g),c.Collection=new Class({Extends:e,setup:function(a,b){return this.setupValidators(),this.parent(a,b),this},_add:function(a,b){return this.validate(a)?this.parent(a,b):this.signalError(a,b),this},validate:function(a){var b=this.getValidator("*");return a=Array.from(a),a.every(function(a){var c=instanceOf(a,f);return b?b(c?a.getData():a):c?a.every(h,this):Object.every(a,h,this)},this)},proofModel:function(a){return a=Array.from(a),a.every(function(a){return g.proof(instanceOf(a,f)?a.getData():a,this._validators)},this)},proof:function(){return this.proofModel(this._models)},signalError:function(a,b){!this.isSilent()&&this.fireEvent("error",[this,a,b])}})},d:function(a,b,c,d){var e=a("3").Model,f=a("6").Silence,g=a("7").Connector,h=a("9"),i=new Class({Implements:[g,Events,Options,f],_models:[],_active:0,_changed:!1,length:0,primaryKey:undefined,options:{primaryKey:undefined,Model:{constructor:e,options:undefined}},initialize:function(a,b){this.setOptions(b),this.setup(a,b)},setup:function(a,b){return this.primaryKey=this.options.primaryKey,this._Model=this.options.Model.constructor,a&&this.add(a),this},hasModel:function(a){var b=this.primaryKey,c,d;return c=this._models.contains(a),b&&!c&&(d=instanceOf(a,e)?a.get(b):a[b],c=this.some(function(a){return d===a.get(b)})),!!c},resetChange:function(){this._changed=!1},attachModelEvents:function(a){return a.addEvents({destroy:this.bound("remove"),change:this.bound("signalChangeModel")}),this},detachModelEvents:function(a){return a.removeEvents({destroy:this.bound("remove"),change:this.bound("signalChangeModel")}),this},act:function(a){return this._active++,a.call(this),this._active--,this},isActive:function(){return!!this._active},_add:function(a,b){return a=new this._Model(a,this.options.Model.options),this.hasModel(a)||(this.attachModelEvents(a),b=this.length==0?void 0:b,b!=void 0?this._models.splice(b,0,a):this._models.push(a),this.length=this._models.length,this._changed=!0,this.signalAdd(a,b!=void 0?b:this.length-1)),this},add:function(a,b){var c=this.length;return a=Array.from(a),this.act(function(){var c=a.length,d=0;while(c--)this._add(a[d++],b)}),!this.isActive()&&this._changed&&(this.signalChange(),this.resetChange()),this},get:function(a){var b=arguments.length,c=0,d;if(b>1){d=[];while(b--)d.push(this.get(arguments[c++]));return d}return this._models[a]},_remove:function(a){return this.hasModel(a)&&(this.detachModelEvents(a),this._models.erase(a),this.length=this._models.length,this._changed=!0,this.signalRemove(a)),this},remove:function(a){var b=this.length;return a=Array.from(a).slice(),this.act(function(){var b=a.length,c=0;while(b--)this._remove(a[c++])}),!this.isActive()&&this._changed&&(this.signalChange(),this.resetChange()),this},replace:function(a,b){var c;return a&&b&&this.hasModel(a)&&!this.hasModel(b)&&(c=this.indexOf(a),c>-1&&(this.act(function(){this.add(b,c),this.remove(a)}),!this.isActive()&&this.signalChange()&&this.resetChange())),this},sort:function(a){return this._models.sort(a),this.signalSort(),this},reverse:function(){return this._models.reverse(),this.signalSort(),this},empty:function(){return this.remove(this._models),this.signalEmpty(),this},toJSON:function(){return this.map(function(a){return a.toJSON()})}});i.implement(h(["empty","sort","change","add","remove","change:model"])),["forEach","each","invoke","every","filter","clean","indexOf","map","some","associate","link","contains","getLast","getRandom","flatten","pick"].each(function(a){i.implement(a,function(){return Array.prototype[a].apply(this._models,arguments)})}),c.Collection=i},e:function(a,b,c,d){var e=a("f").View;c.View=e},f:function(a,b,c,d){var e=a("7").Connector,f=a("6").Silence,g=a("9"),h=function(a){return function(){var b=this.options.events,c=this.element;return c&&b&&Object.each(b,function(b,c){var d=Array.from(b),e=d.length,f=0,g;while(e--)g=d[f++],this.element[a](c,typeOf(g)=="function"?g:this.bound(g))},this),this}},i=new Class({Implements:[e,Events,Options,f],options:{element:undefined,events:{}},initialize:function(a){this.setOptions(a),this.setup(a),this.signalReady()},setup:function(a){return this.options.element&&this.setElement(this.options.element),this},toElement:function(){return this.element},setElement:function(a){return a&&(this.element&&this.destroy(),a=this.element=document.id(a),a&&this.attachEvents()),this},attachEvents:h("addEvent"),detachEvents:h("removeEvent"),create:function(){return this},render:function(a){return this.signalRender.apply(this,arguments),this},inject:function(a,b){return this.element&&(a=document.id(a),b=b||"bottom",this.element.inject(a,b),this.signalInject(a,b)),this},dispose:function(){return this.element&&(this.element.dispose(),this.signalDispose()),this},destroy:function(){var a=this.element;return a&&(a&&(a.destroy(),this.element=undefined),this.signalDestroy()),this}});i.implement(g(["ready","render","dispose","destroy","inject"])),c.View=i},g:function(a,b,c,d){var e=a("c"),f=a("h"),g=a("9"),h=new Class({Extends:e.Collection,options:{Model:{constructor:f.Route,options:{defaults:{typecast:!1,normalizer:null}}},greedy:!1,greedyEnabled:!0},_prevRoutes:[],_prevMatchedRequest:null,_prevBypassedRequest:null,_add:function(a){var b=instanceOf(a,f.Route)?a.get("priority"):a.priority||(a.priority=0);return this.parent(a,this._calcPriority(b)),this},_calcPriority:function(a){var b,c=this.length;do--c;while((b=this.get(c),b)&&a<=b.get("priority"));return c+1},resetState:function(){return this._prevRoutes.length=0,this._prevMatchedRequest=null,this._prevBypassedRequest=null,this},parse:function(a,b){a=a||"",b=b||[];if(a!==this._prevMatchedRequest&&a!==this._prevBypassedRequest){var c=this._getMatchedRoutes(a),d=0,e=c.length,f;if(e){this._prevMatchedRequest=a,this._notifyPrevRoutes(c,a),this._prevRoutes=c;while(d<e)f=c[d],f.route.signalMatch.apply(f.route,b.concat(f.params)),f.isFirst=!d,this.signalMatch.apply(this,b.concat([a,f])),d+=1}else this._prevBypassedRequest=a,this.signalDefault.apply(this,b.concat([a]))}return this},_notifyPrevRoutes:function(a,b){var c=0,d;while(d=this._prevRoutes[c++])this._didSwitch(d.route,a)&&d.route.signalPass(b);return this},_didSwitch:function(a,b){var c=0,d;while(d=b[c++])if(d.route===a)return!1;return!0},_getMatchedRoutes:function(a){var b=[],c=this.length,d;while(d=this.get(--c)){(!b.length||this.options.greedy||d.get("greedy"))&&d.match(a)&&b.push({route:d,params:d.parse(a)});if(!this.options.greedyEnabled&&b.length)break}return b}});h.NORM_AS_ARRAY=function(a,b){return[b.vals_]},h.NORM_AS_OBJECT=function(a,b){return[b]},h.implement(g(["match","default"])),c.Router=h},h:function(a,b,c,d){var e=a("i").Route,f=a("l");e.PatternLexer=f,c.Route=e},i:function(a,b,c,d){var e=a("3"),f=a("9"),g=a("j"),h=a("k"),i=/t(.+)?/.exec("t")[1]==="",j=new Class({Extends:e.Model,options:{defaults:{pattern:void 0,priority:0,normalizer:void 0,greedy:!1,rules:{},typecast:!1,patternLexer:void 0},accessors:{pattern:{set:function(a,b){if(this.validate(a,b)){this.set(a,b);var c={},d=this.get("patternLexer");c._matchRegexp=b,c._optionalParamsIds=c._paramsIds=void 0,typeOf(b)!="regexp"&&(c._paramsIds=d.getParamIds(b),c._optionalParamsIds=d.getOptionalParamsIds(b),c._matchRegexp=d.compilePattern(b)),this.set(c)}}},rules:{set:function(a,b){this.validate(a,b)&&this.set(a,new e.Model(b))}},callback:{set:function(a,b){typeOf(b)=="function"&&this.addEvent("match",b)}},patternLexer:{get:function(){return this.get("patternLexer")||j.PatternLexer}}},validators:{pattern:function(a){return["null","regexp","string"].contains(typeOf(a))},priority:Type.isNumber,normalizer:Type.isFunction,greedy:Type.isBoolean,rules:Type.isObject,patternLexer:Type.isObject}},match:function(a){return a=a||"",this.get("_matchRegexp").test(a)&&this._validateParams(a)},parse:function(a){return this._getParamsArray(a)},_validateParams:function(a){var b=this.get("rules"),c=this._getParamsObject(a);return b.every(function(b,d){return d=="normalize_"||!!this._isValidParam(a,d,c)},this)},_isValidParam:function(a,b,c){var d=this.get("rules").get(b),e=c[b],f=!1,g=b.indexOf("?")===0,h=this.get("_optionalParamsIds"),i;return!e&&h&&h.indexOf(b)!==-1?!0:(i=typeOf(d),i!=="function"&&g&&(e=c[b+"_"]),i=="regexp"?f=d.test(e):i=="array"?f=d.indexOf(e)!==-1:i=="function"&&(f=d(e,a,c)),f)},_getParamsObject:function(a){var b=this.get("typecast"),c=this.get("_paramsIds"),d=this.get("_optionalParamsIds"),e=this.get("patternLexer").getParamValues(a,this.get("_matchRegexp"),b),f={},j=e&&e.length||0,k,l;while(j--)f[j]=l=e[j],c&&(k=c[j],k.indexOf("?")===0&&l&&(f[k+"_"]=l,e[j]=l=h(l)),i&&l===""&&d&&d.indexOf(k)!==-1&&(e[j]=l=void 0),f[k]=l);return f.request_=b?g(a):a,f.vals_=e,f},_getParamsArray:function(a){var b=this.get("rules"),c=b&&b.get("normalize_")||this.get("normalizer"),d=this._getParamsObject(a);return params=d.vals_,c&&Type.isFunction(c)&&(params=c(a,d)),params},interpolate:function(a){var b=this.get("patternLexer").interpolate(this.get("pattern"),a);if(!this._validateParams(b))throw new Error("Generated string doesn't validate against `Route.rules`.");return b}});j.implement(f(["match","pass"])),c.Route=j},j:function(a,b,c,d){var e;c=b.exports=function(a){var b;return a===null||a==="null"?b=null:a==="true"?b=!0:a==="false"?b=!1:a===e||a==="undefined"?b=e:a===""||isNaN(a)?b=a:b=parseFloat(a),b}},k:function(a,b,c,d){var e=a("j");c=b.exports=function(a){var b=(a||"").replace("?","").split("&"),c=b.length,d={},f,g;while(c--)f=b[c].split("="),g=e(f[1]),d[f[0]]=typeof g=="string"?decodeURIComponent(g):g;return d}},l:function(a,b,c,d){function o(){var a,b;for(a in j)j.hasOwnProperty(a)&&(b=j[a],b.id="__CR_"+a+"__",b.save="save"in b?b.save.replace("{{id}}",b.id):b.id,b.rRestore=new RegExp(b.id,"g"))}function p(a,b){var c=[],d;a.lastIndex=0;while(d=a.exec(b))c.push(d[1]);return c}function q(a){return p(i,a)}function r(a){return p(j.OP.rgx,a)}function s(a){return a=a||"",a&&(n===k?a=a.replace(g,""):n===m&&(a=a.replace(h,"")),a=t(a,"rgx","save"),a=a.replace(f,"\\$&"),a=t(a,"rRestore","res"),n===k&&(a="\\/?"+a)),n!==l&&(a+="\\/?"),new RegExp("^"+a+"$")}function t(a,b,c){var d,e;for(e in j)j.hasOwnProperty(e)&&(d=j[e],a=a.replace(d[b],d[c]));return a}function u(a,b,c){var d=b.exec(a);return d&&(d.shift(),c&&(d=e(d))),d}function v(a,b){if(typeof a!="string")throw new Error("Route pattern should be a string.");var c=function(a,c){var d;if(c in b){d=String(b[c]);if(a.indexOf("*")===-1&&d.indexOf("/")!==-1)throw new Error('Invalid value "'+d+'" for segment "'+a+'".')}else{if(a.indexOf("{")!==-1)throw new Error("The segment "+a+" is required.");d=""}return d};return j.OS.trail||(j.OS.trail=new RegExp("(?:"+j.OS.id+")+$")),a.replace(j.OS.rgx,j.OS.save).replace(i,c).replace(j.OS.trail,"").replace(j.OS.rRestore,"/")}var e=a("m"),f=/[\\.+*?\^$\[\](){}\/'#]/g,g=/^\/|\/$/g,h=/\/$/g,i=/(?:\{|:)([^}:]+)(?:\}|:)/g,j={OS:{rgx:/([:}]|\w(?=\/))\/?(:|(?:\{\?))/g,save:"$1{{id}}$2",res:"\\/?"},RS:{rgx:/([:}])\/?(\{)/g,save:"$1{{id}}$2",res:"\\/"},RQ:{rgx:/\{\?([^}]+)\}/g,res:"\\?([^#]+)"},OQ:{rgx:/:\?([^:]+):/g,res:"(?:\\?([^#]*))?"},OR:{rgx:/:([^:]+)\*:/g,res:"(.*)?"},RR:{rgx:/\{([^}]+)\*\}/g,res:"(.+)"},RP:{rgx:/\{([^}]+)\}/g,res:"([^\\/?]+)"},OP:{rgx:/:([^:]+):/g,res:"([^\\/?]+)?/?"}},k=1,l=2,m=3,n=k;o(),c=b.exports={strict:function(){n=l},loose:function(){n=k},legacy:function(){n=m},getParamIds:q,getOptionalParamsIds:r,getParamValues:u,compilePattern:s,interpolate:v}},m:function(a,b,c,d){var e=a("j");c=b.exports=function(a){var b=a.length,c=[];while(b--)c[b]=e(a[b]);return c}},n:function(a,b,c,d){var e="*",f=function(a){var b={};return typeOf(a)=="function"?b[e]=a:b=a,b},g=new Class({_validators:{},options:{validators:{}},setupValidators:function(){var a=this._validators;return this._validators={},this.setValidator(Object.merge({},f(a),f(this.options.validators))),this},setValidator:function(a,b){var c=b;return b&&!b._orig&&(b=b.bind(this),b._orig=c),this._validators[a]=b,this}.overloadSetter(),getValidator:function(a){return this._validators[a]}.overloadGetter(),validate:function(a,b){var c=this.getValidator(a),d=!0;return c&&(d=c(b)),d},proof:function(a){var b=Object.clone(this._validators),c=b[e],d;return c?(delete b[e],d=Object.keys(a),c(a)&&Object.keys(b).every(d.contains.bind(d))):g.proof(a,b)}});g.proof=function(a,b){return Object.every(b,function(b,c){return c in a&&b(a[c])})},c.Snitch=g},o:function(a,b,c,d){var e=a("p").Unit,f=function(a,b){var c=a&&a.getPrefix&&a.getPrefix();return(c?c+".":"")+b},g=new Class({Extends:e,subscribe:function(a,b,c,d){if(typeof a=="object")if(typeof b!="function")for(var e in a)this.subscribe(e,a[e],void 0,b);else for(var e in a)this.subscribe(e,a[e],b,c);else typeof c=="object"&&(d=c),!!a&&(a=f(d,a)),this.parent(a,b,c);return this},unsubscribe:function(a,b,c){if(typeof a=="object")for(var d in a)this.unsubscribe(d,a[d],b);else!!a&&(a=f(c,a)),this.parent(a,b);return this}});g.extend(e),c.Observer=g},p:function(a,b,c,d){(function(){function i(a){return this instanceof i?(this.$unitAttached=!0,this.$unitHandlers={},this.$unitPrefix="",i.$prototyping?this:(a&&(this.extendUnit(a),this.setupUnit()),this)):new i(a)}var a=/^on([A-Z])/,b=function(a,b){return b.toLowerCase()},c=function(a){return function(){return a.apply(this,arguments)}},d=function(){var a=arguments.length;while(a--){var b=arguments[a];switch(typeOf(b)){case"type":case"class":b.$prototyping=!0,Object.append(this,new b),delete b.$prototyping;break;case"unit":for(var d in b){if(!b.hasOwnProperty(d))continue;var e=b[d];this[d]=typeof e=="function"&&!e.exec?c(e):e}break;default:Object.append(this,b)}}return this},e=function(){var a=e.current;a.apply(a.$ownerObj,e.args)},f=new Events;for(var g in f){var h=f[g];if(typeof h!="function"||h.exec||!h.$origin)continue;f[g]=h.$origin}Object.append(f,{$dispatched:{},$finished:{},$mediator:this.document?this.document.createElement("script"):null,setup:function(){var a=this.$mediator;if(!a||!a.attachEvent&&!a.addEventListener)return this;if(a.addEventListener)a.addEventListener("publishDispatch",e,!1),this.dispatch=function(b,c){var d=document.createEvent("UIEvents");d.initEvent("publishDispatch",!1,!1),e.args=c,e.current=b,a.dispatchEvent(d)};else if(a.attachEvent&&!a.addEventListener){$(document.head).appendChild(a),a.publishDispatch=0,a.attachEvent("onpropertychange",e),this.dispatch=function(b,c){e.args=c,e.current=b,a.publishDispatch++};var b=function(){a.detachEvent("onpropertychange",e),a.parentNode.removeChild(a),this.detachEvent("onunload",b)};window.attachEvent("onunload",b)}return this},getFinished:function(a){return this.$finished[a]||null},getDispatched:function(a){return this.$dispatched[a]||[]},dispatch:function(a,b){e.args=b,e.current=a,e.call(null)},replay:function(a,b){var c=this.$dispatched,d=null;return!c||!(d=c[a])?!1:(this.dispatch(b,d),!0)},redispatch:function(a,b){var c=this.$finished,d=null;return!c||!(d=c[a])?!1:(this.dispatch(b,d),!0)},fireEvent:function(c,d,e){var f=this,g=this.$dispatched,h=this.$finished,i=this.$events,j=null;c=c.replace(a,b),d=Array.from(d),g[c]=d,e&&(h[c]=d);if(!i||!(j=i[c]))return this;for(var k=0,l=j.length;k<l;k++)this.dispatch(j[k],d);return this},removeEvents:function(c){var d;if(typeOf(c)=="object"){for(d in c){if(!c.hasOwnProperty(d))continue;this.removeEvent(d,c[d])}return this}c&&(c=c.replace(a,b));for(d in this.$events){if(c&&c!=d)continue;var e=this.$events[d];for(var f=e.length;f--;)f in e&&this.removeEvent(d,e[f])}return this},removeFinished:function(){var a=this.$finished;for(var b in a){if(!a.hasOwnProperty(b)||b=="window.domready"||b=="window.load")continue;delete a[b]}return this},removeDispatched:function(){var a=this.$dispatched;for(var b in a){if(!a.hasOwnProperty(b)||b=="window.domready"||b=="window.load")continue;delete a[b]}return this},flush:function(){return this.removeEvents(),delete f.$events,f.$events={},this.removeFinished(),this.removeDispatched(),this}}).setup(),window.addEvents({domready:function(){f.fireEvent("window.domready",[],!0)},load:function(){f.fireEvent("window.load",[],!0)}});var j=function(a,b){var c=function(){return b.apply(this,arguments),a.apply(this,arguments)};return c.$unwrapped=a,c},k=function(a,b){var c=function(){return a.apply(b,arguments)};return c.$origin=a,c};this.Unit=(new Type("Unit",i)).extend({isUnit:function(a){return typeOf(a)==="unit"?!0:a.$unitInstance?a.$unitInstance instanceof i:!1},decorate:function(a,b){if(a.$unitInstance)return a;var c=a.$unitInstance=new i;c.extendUnit=function(b){return d.call(a,b),this};for(var e in c){var f=c[e];if(a[e]||e=="$family"||typeof f!="function"||f.exec)continue;a[e]=k(f,c)}return a.setupUnit(),b?a:this.wrapEvents(a)},undecorate:function(a){var b=a.$unitInstance;if(!b)return a;for(var c in b){var d=a[c];if(!d||d.$origin==d)continue;delete a[c]}return this.unwrapEvents(a),delete a.$unitInstance,a},wrapEvents:function(a){var b=a.fireEvent;return!b||b.$unwrapped?a:(a.fireEvent=j(b,function(b,c){a.publish(b,c)}),a)},unwrapEvents:function(a){var b=a.fireEvent;return b&&b.$unwrapped&&(a.fireEvent=b.$unwrapped),a}}).implement({setupUnit:function(){var a=this;return this.Uses&&(Array.from(this.Uses).each(this.extendUnit.bind(this)),delete this.Uses),this.Prefix&&(this.setPrefix(this.Prefix),delete this.Prefix),this.initSetup&&f.dispatch(function(){a.initSetup.apply(a)}),this.readySetup&&this.subscribe("window.domready",function(){a.readySetup()}),this.loadSetup&&this.subscribe("window.load",function(){a.loadSetup()}),this},extendUnit:function(a){return d.call(this,a),this},getPrefix:function(){return this.$unitPrefix},setPrefix:function(a){return this.$unitPrefix=(a||"").toString(),this},isAttached:function(){return!!this.$unitAttached},detachUnit:function(){var a=this.$unitHandlers;if(!this.$unitAttached)return this;for(var b in a){var c=a[b].length;while(c--)f.removeEvent(b,a[b][c])}return this.$unitAttached=!1,this},attachUnit:function(){var a=this.$unitHandlers;if(this.$unitAttached)return this;for(var b in a){var c=a[b].length;while(c--)f.addEvent(b,a[b][c])}return this.$unitAttached=!0,this},destroyUnit:function(){return this.detachUnit(),this.$unitHandlers={},this},subscribe:function(a,b,c){if(typeof a=="object")for(var d in a)this.subscribe(d,a[d],b);else a.charAt(0)=="!"&&(c=!!(a=a.substring(1))),b.$ownerObj=this,f.redispatch(a,b)||(Events.prototype.addEvent.call({$events:this.$unitHandlers},a,b),this.$unitAttached&&(f.addEvent(a,b),c&&f.replay(a,b)));return this},unsubscribe:function(a,b){if(typeof a!="string")for(var c in a)this.unsubscribe(c,a[c]);else f.removeEvent(a,b),Events.prototype.removeEvent.call({$events:this.$unitHandlers},a,b);return this},publish:function(a,b,c){return a.charAt(0)=="!"?c=a=a.substring(1):this.$unitPrefix&&(a=this.$unitPrefix+"."+a),this.$unitAttached&&f.fireEvent.call(f,a,b,c),this}});var l=function(a){var b=function(){b.$spy.apply(null,arguments),b.$unwrapped.apply(f,arguments)};return Object.append(b,{$unwrapped:a})};i.Dispatcher={flush:function(){return f.flush(),this},getFinished:function(){return Object.clone(f.$finished)},removeFinished:function(){return f.removeFinished(),this},getDispatched:function(a){return a?(f.$dispatched[a]||[]).clone():Object.clone(f.$dispatched)},removeDispatched:function(){return f.removeDispatched(),this},getSubscribers:function(a){return a?(f.$events[a]||[]).clone():Object.clone(f.$events)},spySubscribe:function(a){var b=f.addEvent;return b.$unwrapped||(f.addEvent=l(b)),f.addEvent.$spy=a,this},unspySubscribe:function(){var a=f.addEvent;return a.$unwrapped&&(f.addEvent=a.$unwrapped),this},spyUnsubscribe:function(a){var b=f.removeEvent;return b.$unwrapped||(f.removeEvent=l(b)),f.removeEvent.$spy=a,this},unspyUnsubscribe:function(){var a=f.removeEvent;return a.$unwrapped&&(f.removeEvent=a.$unwrapped),this},spyPublish:function(a){var b=f.fireEvent;return b.$unwrapped||(f.fireEvent=l(b)),f.fireEvent.$spy=a,this},unspyPublish:function(){var a=f.fireEvent;return a.$unwrapped&&(f.fireEvent=a.$unwrapped),this}}}).call(this)},q:function(a,b,c,d){var e=a("3"),f=a("o").Observer,g=a("r"),h=new Class({Extends:e.Model,Implements:[g.observer],options:{Prefix:""},setup:function(a,b){return this.setPrefix(this.options.Prefix||String.uniqueID()),this.setupUnit(),f.decorate(this),this.parent(a,b),this}});e.Model=c.Model=h},r:function(a,b,c,d){var e=a("o").Observer,f=function(){return Array.prototype.push.call(arguments,this),this.parent.apply(this,arguments),this};c.observer=new Class({Extends:e,subscribe:f,unsubscribe:f})},s:function(a,b,c,d){var e=a("c"),f=a("3").Model,g=a("o").Observer,h=a("r"),i=new Class({Extends:e.Collection,Implements:[h.observer],options:{Prefix:"",Model:{constructor:f}},setup:function(a,b){return this.setPrefix(this.options.Prefix),this.setupUnit(),g.decorate(this),this.parent(a,b),this}});e.Collection=c.Collection=i},t:function(a,b,c,d){var e=a("e"),f=a("o").Observer,g=a("r"),h=new Class({Extends:e.View,Implements:[g.observer],options:{Prefix:""},setup:function(a){return this.parent(a),this.setPrefix(this.options.Prefix||String.uniqueID()),this.setupUnit(),f.decorate(this),this}});e.View=c.View=h}})